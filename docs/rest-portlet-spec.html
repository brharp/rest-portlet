<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
        'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'> <head>
<title>REST Portlet Specification, version 1.0</title>
<link rel='stylesheet' type='text/css' href='style.css' media='screen'/>
</head>
<body>
<h1>REST Portlet Specification, version 1.0</h1>

<p>October 12th, 2007 <br />
M. Brent Harp <a href="&#x6D;&#x61;&#x69;l&#x74;&#x6F;:&#98;r&#x68;&#97;&#114;&#112;&#64;&#x75;&#111;&#x67;&#117;&#x65;&#108;&#112;&#104;&#46;&#99;&#x61;">&#98;r&#x68;&#97;&#114;&#112;&#64;&#x75;&#111;&#x67;&#117;&#x65;&#108;&#112;&#104;&#46;&#99;&#x61;</a> <br />

<h2>Preface (PLT.1)</h2>

<p>This document describes the REST Portlet Specification, version 1.0.</p>

<p>This specification maps the Java Portlet Specification v1.0 to
features of the HTTP protocol. The specification is not intended to be
read alone, but in conjunction with the Java Portlet Specification
v1.0. Sections of this specification that relate directly to the Java
Portlet Specification reference the relevant section of the Java
specification in parentheses (e.g. (PLT.1)).</p>

<h2>Overview (PLT.2)</h2>

<h3>What is a <ins>REST</ins> Portlet? (PLT.2.2)</h3>

<p>A REST portlet is a technology-neutral web component, invoked
by a portlet container, that processes requests and generates dynamic
content.</p>

<p>The content generated by a REST portlet is a fragment of markup
(e.g. HTML) adhering to certain rules that can be aggregated with
other document fragments to form a complete portal page.</p>

<h2>Relationship with HTTP</h2>

<p>The methods of a REST Portlet are invoked by HTTP
requests. Information about the portlet container, details of portlet
requests, portlet state, etc. are passed to the portlet via
HTTP request headers. Details of the portlet response, changes to
portlet state, etc. are communicated from the portlet to the
portlet container via HTTP response headers. Dynamic content generated
by the portlet is returned in the HTTP response body.</p>

<p>This arrangement allows a REST portlet to be written in any language
using any technology that supports HTTP. The basic requirement for
implementing a portlet is to respond to an HTTP GET request. A
REST portlet may optionally access portal features by reading
and writing the extended HTTP headers.</p>

<h2>The REST Portlet Protocol (PLT.5 The Portlet Interface)</h2>

<p>The REST Portlet Protocol defines the basic set of HTTP
interactions that all portlets must support.</p>

<h3>The Endpoint</h3>

<p>Every portlet must define one endpoint URL that the portal will
use to invoke the methods of the portlet. This URL must respond
to GET requests, and may optionally respond to POST requests. The
endpoint URL must be an absolute URL, must be accessible by the portal
server, and must not contain a query string.</p>

<p>An example of an endpoint URL is
<code>http://www.example.com/my-app/portlet.php</code>.</p>

<h3>Portlet Life Cycle (PLT.5.2)</h3>

<p>A portlet is managed through a well defined life cycle that includes
initialization, followed by zero or more requests, followed by
deinitialization.</p>

<p>Each event in the life cycle of a portlet triggers an HTTP
request to the portlet's endpoint. The event that triggered the
HTTP request is indicated by the <code>X-Portlet-Method</code> request
header. This header is sent with every portlet invocation, and
its value may be one of <code>init</code>, <code>render</code>, <code>processAction</code>, or
<code>destroy</code>.</p>

<h4>Initialization (PLT.5.2.2)</h4>

<p>The portal must intialize the portlet before invoking it to
handle any requests. To initialize the portlet, the portal
sends an HTTP GET request to the portlet's endpoint, sending
the <code>X-Portlet-Method</code> request header with a value of <code>init</code>. The
portal will also include request headers defined in the Portlet Config
Protocol. These headers provide access to the initialization
parameters, information about the runtime environment, etc. The remote
portlet should respond with HTTP 200 OK if iniitalization is
successful.</p>

<h4>Request Handling (PLT.5.2.4)</h4>

<p>Once a portlet has been initialized, it may be invoked to
process client requests.</p>

<p>The portlet protocol defines two methods for handling requests, the
<code>processAction</code> and the <code>render</code> method.</p>

<p>Invoking the <code>processAction</code> method is referred to as a
<code>processAction</code> request, and invoking the <code>render</code> method is referred
to as a <code>render</code> request.</p>

<p>To invoke the <code>processAction</code> method, the portal makes an HTTP POST
request to the portlet's endpoint URL, including an
<code>X-Portlet-Method</code> request header with the value <code>processAction</code>. The
portal may also include request headers defined by the Portlet Request
Protocol, and request headers defined by the Action Request Protocol,
which contain additional information about the action request. The
portlet should return status HTTP 200 OK, along with any
response headers defined by the Portlet Response and Action Response
Protocols to alter the portlet state, such as setting preferences,
changing the portlet mode, etc. The body of a <code>processAction</code> response
is ignored by the portal, and may be empty.</p>

<p>Always after invoking the <code>processAction</code> method, and other times as
well, the portal may invoke the portlet's <code>render</code> method to generate
dynamic content. To invoke the <code>render</code> method, the portal makes an
HTTP GET request to the portlet's endpoint URL, including an
<code>X-Portlet-Method</code> request header with the value <code>render</code>. The portal
may also include request headers defined by the Portlet Request
Protocol, and headers defined by the Render Request Protocol, which
contain additional information about the render request. The portlet
should return HTTP 200 OK, along with any response headers defined by
the Portlet Response and Render Response Protocols to convey
additional information about the response. Dynamic content generated by the portlet is included in the body of <code>render</code> response.</p>

<h4>End of Service (PLT.5.2.5)</h4>

<p>When a portlet is to be removed from service, the portal will
make an HTTP GET request, including an <code>X-Portlet-Method</code> header with
the value <code>destroy</code>. The response to this request is ignored.</p>

<h2>Portlet URLs (PLT.7)</h2>

<h3>PortletURL (PLT.7.1)</h3>

<p>A portlet may need to generate URLs that refer to the portlet
itself. Such URLs are called "portlet URLs".</p>

<p>A REST Portlet may generate a portlet URL by using the
"portlet:" URL scheme.</p>

<p>A portlet scheme URL has the following general format:</p>

<pre><code>portlet:(render|processAction)[;mode=(view|edit|help|...)]
                              [;state=(normal|maximized|minimized|...)]
                              [;secure=(true|false)]
                              [?(name=value)*]
</code></pre>

<p>A portlet URL with a path component of "render" will generate a render
URL, a portlet URL with a path component of "processAction" will
generate a processAction URL.</p>

<p>Parameters in the query string will be added as portlet parameters to
the request generated by this URL.</p>

<h4>Including a Portlet Mode or a Window State (PLT.7.1.1)</h4>

<p>The <code>mode</code> and <code>state</code> parameters set the portlet mode and window state
properties of the generated URL.</p>

<h4>Portlet URL security (PLT.7.1.2)</h4>

<p>The <code>secure</code> parameter allows a portlet to indicate that a
secure connection (ie. HTTPS) is required. By default the URL assumes
the same security requirements as the current request.</p>

<h4>Valid Locations for Portlet URLs</h4>

<p>Where Portlet URLs may legally appear in dynamically generated portlet
content is determined by the implementation, and depends on the
content type of the generated content. However, this specification
requires that for the content type "text/html", portlet URLs may
appear as the value of the following element attributes.</p>

<table>
  <thead>
    <tr>
      <th>Element</th>
      <th>Attribute</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a</td>
      <td>href</td>
    </tr>
    <tr>
      <td>area</td>
      <td>href</td>
    </tr>
    <tr>
      <td>form</td>
      <td>action</td>
    </tr>
  </tbody>
</table>

<h4>Portlet URL Examples</h4>

<p>A render URL -</p>

<pre><code>     &lt;a href="portlet:render"&gt;refresh&lt;/a&gt;
</code></pre>

<p>A render URL with parameters -</p>

<pre><code>     &lt;a href="portlet:render?show=all"&gt;Expand&lt;/a&gt;
</code></pre>

<p>A render URL that maximizes the window -</p>

<pre><code>     &lt;a href="portlet:render;state=maximized"&gt;Maximize&lt;/a&gt;
</code></pre>

<p>A form submission that returns the user to "view" mode -</p>

<pre><code>     &lt;form action="portlet:processAction;mode=view" method="post"&gt;
           &lt;input name="foo"&gt;&lt;/input&gt;
           &lt;input type="submit"/&gt;
     &lt;/form&gt;
</code></pre>

<h2>Portlet Requests (PLT.11)</h2>

<p>The request headers encapsulate all information about the client
request, parameters, request content data, portlet mode, window state,
etc.</p>

<h3>Portlet Request Protocol (PLT.11.1)</h3>

<p>The Portlet Request protocl defines common headers for render
requests and process action requests.</p>

<h4>Request Parameters (PLT.11.1.1)</h4>

<p>The portlet receives request parameters either in the query
string or in the body of the HTTP request.</p>

<p>If the request is a processAction request, and the client request had
a content type of 'application/x-www-form-urlencoded', the request
parameters will be posted, URL encoded, in the body of the HTTP
request. If the client request had another content type, the request
parameters will be passed in the query string.</p>

<p>If the request is a render request, the request parameters will be
passed in the query string.</p>

<h4>Request Properties (PLT.11.1.4)</h4>

<p>Request properties are sent, cookie encoded, as the value of the
<code>X-Portlet-Property</code> request header.</p>

<h4>Request Context Path (PLT.11.1.5)</h4>

<p>The context path of the portlet application is sent as the value of
the <code>X-Portlet-Context-Path</code> request header.</p>

<h4>Security Attributes (PLT.11.1.6)</h4>

<p>The authentication scheme being used between the client and the portal
is indicated by the <code>X-Portlet-Auth-Type</code> header. If the user is not
authenticated, this header is omitted.</p>

<p>The login name of the user making this request is indicated by the
<code>X-Remote-User</code> header.</p>

<p>If the request has been transmitted over a secure protocol (such as
HTTPS), this fact is indicated by a <code>X-Portlet-Secure</code> request header
with a value of 'true'. Otherwise, the value of this header will be
'false'.</p>

<h4>Response Content Types (PLT.11.1.7)</h4>

<p>Not available.</p>

<h4>Internationalization (PLT.11.1.8)</h4>

<p>The user's selected locale is indicated by the <code>X-Portlet-Locale</code>
request header. The value of this header <em>may</em> be the value of the
<code>Accept-Language</code> header from the original client request.</p>

<h4>Portlet Mode (PLT.11.1.9)</h4>

<p>The current portlet mode is indicated by the <code>X-Portlet-Portlet-Mode</code>
request header. The value of the header may be <code>view</code>, <code>edit</code>, <code>help</code>,
or a previously defined custom portlet mode.</p>

<h4>Window State (PLT.11.1.10)</h4>

<p>The current window state is indicated by the <code>X-Portlet-Window-State</code>
request header. The value of the header may be <code>normal</code>, <code>maximized</code>,
<code>minimized</code>, or a previously defined custom window state.</p>

<h3>Action Request Protocol (PLT.11.2)</h3>

<p>The action request protocol extends the portlet request protocol with
additional request headers for processing action requests.</p>

<h4>Retrieving Uploaded Data (PLT.11.2.1)</h4>

<p>When the client request contains HTTP POST data of a type other than
<code>application/x-www-form-urlencoded</code>, the data is written in the POST
data of the portlet request.</p>

<p>The <code>Content-Type</code> and <code>Content-Length</code> request headers provide the
content type and length (in octects) of the posted data.</p>

<h2>Portlet Responses (PLT.12)</h2>

<p>The response headers encapsulate all the information to be returned to
the portlet container from the portlet during a request: a
redirection, a portlet mode change, title, content, etc. The portal
will use this information to construct the response.</p>

<h3>Portlet Response Protocol (PLT.12.1)</h3>

<p>The portlet response protocol defines the common response headers for
the <code>render</code> and <code>processAction</code> method invocations.</p>

<h4>Response Properties (PLT.12.1.1)</h4>

<p>A portlet may send vendor specific information to the portal
using the <code>X-Portlet-Set-Property</code> and <code>X-Portlet-Add-Property</code>
response headers.</p>

<p>The <code>X-Portlet-Set-Property</code> header replaces any existing value of the
property. Conversely, the <code>X-Portlet-Add-Property</code> adds a value to a
set of values.</p>

<p>The value of this header must be cookie encoded.</p>

<h4>Encoding of URLs (PLT.12.1.2)</h4>

<p>References to resources within the portal that require special URL
encoding should use the <code>portlet:resource</code> URI.</p>

<h3>Action Response Protocol (PLT.12.2)</h3>

<p>The action response protocol extends the portlet response protocol
with headers sent with a process action response.</p>

<h4>Redirections (PLT.12.2.1)</h4>

<p>The portlet may redirect the user to a different URL sending
the <code>X-Portlet-Send-Redirect</code> response header. The value of this
header must be a fully qualified or full path URL.</p>

<h4>Portlet Modes and Window State Changes (PLT.12.2.2)</h4>

<p>The <code>X-Portlet-Set-Portlet-Mode</code> response header allows a remote
portlet to change its current portlet mode in response to a
<code>processAction</code> request. The value of this header must be <code>view</code>,
<code>edit</code>, <code>help</code>, or a previously defined custom portlet mode.</p>

<p>The <code>X-Portlet-Set-Window-State</code> response header allows a remote
portlet to change its current window state in response to a
<code>processAction</code> request. The value of this header must be <code>normal</code>,
<code>maximized</code>, <code>minimized</code>, or a previously defined custom window state.</p>

<h4>Render Parameters (PLT.12.2.3)</h4>

<p>A REST portlet may set render parameters by returning a
<code>X-Portlet-Set-Render-Parameter</code> header in response to a process
action request.</p>

<p>The value of this header must be a cookie encoded list of name-value
pairs. The parameters will be sent with each render request until a
new action targets the portlet window.</p>

<h3>Render Response Protocol (PLT.12.3)</h3>

<p>The render response protocol extends the portlet response protocol
with response headers allowed in a response to a <code>render</code> request.</p>

<h4>Content Type (PLT.12.3.1)</h4>

<p>A portlet must indicate the content type of the response by
sending a <code>Content-Type</code> response header.</p>

<h4>Output Stream and Writer Objects (PLT.12.3.2)</h4>

<p>A portlet may generate its content by writing an HTTP response
body.</p>

<h4>Namespace encoding (PLT.12.3.4)</h4>

<p>A portlet may namespace elements that must be unique within the
portal page (e.g. JavaScript variables, element IDs) with the value of
the <code>X-Portlet-Namespace</code> request header.</p>

<h4>Portlet Title (PLT.12.3.5)</h4>

<p>A portlet may indicate its preferred portlet window title by
sending a <code>X-Portlet-Set-Title</code> response header, specifying the
preferred title as the header value.</p>

<p>The portal is not required to display the preferred title.</p>

<h2>Portlet Preferences (PLT.14)</h2>

<h3>Portlet Preferences Protocol (PLT.14.1)</h3>

<p>REST Portlets access their preferences through the portlet
preferences protocol. Portlets may only modify preference values
during invocation of the <code>processAction</code> method.</p>

<p>To access and manipulate preferences, the preferences protocol defines
the following HTTP headers:</p>

<ul>
<li><code>X-Portlet-Preference</code></li>
<li><code>X-Portlet-Set-Preference</code></li>
</ul>

<p>The <code>X-Portlet-Preference</code> header is a request header sent with all
<code>render</code> and <code>processAction</code> method requests. Its value is a cookie
encoded list of name-value pairs representing the current set of
preferences.</p>

<p>The <code>X-Portlet-Set-Preference</code> header is a response header that may be
sent in response to a <code>processAction</code> method request. Its value is a
cookie encoded list of name-value pairs to store as portlet
preferences. If a preference with the given name already exists, its
value is replaced with the new value. If the preference value is
omitted (ie. "NAME=;"), the named preference is reset.</p>

<h2>Sessions (PLT.15)</h2>

<p>The portlet session ID is provided to portlets via the
<code>X-Portlet-Session-Id</code> request header. This header is sent with all
<code>render</code> and <code>processAction</code> method requests.</p>

<h2>User Information (PLT.17)</h2>

<h3>Defining User Attribute (PLT.17.1)</h3>

<p>The set of user attributes used by a portlet must be defined in the
portlet deployment descriptor.</p>

<h3>Accessing User Attributes (PLT.17.2)</h3>

<p>User attributes are made available to portlets through the
<code>X-Portlet-User-Info</code> request header. The value of this header is a
cookie encoded list of attribute-value pairs from the user info
map. This header is sent with all <code>render</code> and <code>processAction</code> method
requests.</p>


<hr/>
<address></address>
<p><!-- hhmts start -->
Last modified: Tue Oct 16 09:57:49 2007
<!-- hhmts end --></p>
</body> </html>
